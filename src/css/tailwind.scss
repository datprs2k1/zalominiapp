@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    height: -webkit-fill-available;
    overflow-x: hidden;
  }
  
  body {
    min-height: -webkit-fill-available;
    overscroll-behavior-y: none;
    touch-action: pan-y;
    @apply text-foreground;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply text-foreground;
  }

  /* Enhanced Mobile optimizations for medical UI */
  @media (max-width: 768px) {
    :root {
      /* Optimized text sizes for mobile medical interface */
      font-size: 15px;
    }

    /* Enhanced tap target sizes for medical accessibility */
    button,
    [role="button"],
    a.btn,
    input[type="submit"],
    input[type="button"],
    .medical-touch-target {
      min-height: 44px;
      min-width: 44px;
      touch-action: manipulation;
    }

    /* Large touch targets for critical medical actions */
    .medical-touch-large {
      min-height: 56px;
      min-width: 56px;
    }

    /* Fix for iOS 100vh issue */
    .min-h-screen {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }

    /* Improved form controls for mobile medical interface */
    input, select, textarea {
      font-size: 16px !important; /* Prevents zoom on focus in iOS */
      border-radius: 12px; /* Medical-friendly rounded corners */
    }

    /* Enhanced medical animations for mobile */
    .medical-slide-up {
      animation: medicalSlideUp 0.4s var(--medical-ease) forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    /* Medical staggered animations */
    .medical-delay-100 {
      animation-delay: 100ms;
    }

    .medical-delay-200 {
      animation-delay: 200ms;
    }

    .medical-delay-300 {
      animation-delay: 300ms;
    }

    @keyframes medicalSlideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Enhanced touch feedback for medical cards */
    .medical-touch-hover {
      @apply transition-all duration-300;
      transform-origin: center;
    }

    .medical-touch-hover:active {
      transform: scale(0.98);
      transition-duration: 150ms;
    }

    /* Medical card spacing for mobile */
    .medical-card-mobile {
      margin-bottom: 16px;
      padding: 16px;
      border-radius: 16px;
    }

    /* Emergency service mobile indicators */
    .emergency-mobile {
      border-left: 4px solid #dc2626;
      background: linear-gradient(90deg, #fef2f2 0%, #ffffff 100%);
    }

    /* Mobile-specific medical gradients */
    .medical-gradient-mobile {
      background: linear-gradient(135deg, var(--primary-50) 0%, var(--secondary-50) 100%);
    }
  }
}

@layer components {
  /* Enhanced medical components */
  .btn-primary {
    @apply bg-primary text-white px-4 py-2 rounded-lg min-h-[44px] transition-all duration-300;
  }

  .btn-medical {
    @apply bg-gradient-to-r from-primary to-primary-dark text-white px-6 py-3 rounded-lg min-h-[44px] shadow-medical hover:shadow-medical-hover transition-all duration-300 font-medium;
  }

  .btn-emergency {
    @apply bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-3 rounded-lg min-h-[44px] shadow-emergency transition-all duration-300 font-medium;
  }

  /* Enhanced mobile navigation bar with medical theming */
  .mobile-nav-bar {
    @apply fixed bottom-0 left-0 right-0 bg-gradient-to-r from-white to-gray-50 border-t border-primary-200 flex justify-around items-center p-2 z-40;
    height: 60px;
    box-shadow: 0 -4px 20px rgba(0, 102, 204, 0.1);
  }

  /* Medical card components */
  .medical-card {
    @apply bg-gradient-to-r from-white to-gray-50 rounded-xl border border-primary-200 shadow-card hover:shadow-card-hover transition-all duration-300 p-4;
  }

  .medical-card-emergency {
    @apply bg-gradient-to-r from-red-50 to-red-25 border-red-200 shadow-emergency;
  }

  /* Mobile-specific medical components */
  @media (max-width: 768px) {
    .medical-card {
      @apply p-4 mb-4;
    }

    .medical-search-mobile {
      @apply w-full px-4 py-3 text-base rounded-xl border-2 border-primary-200 focus:border-primary focus:ring-2 focus:ring-primary-100;
    }

    .medical-filter-mobile {
      @apply flex overflow-x-auto space-x-3 pb-2 px-4 -mx-4;
    }

    .medical-pagination-mobile {
      @apply flex justify-between items-center px-4 py-3 bg-gradient-to-r from-primary-50 to-secondary-50;
    }
  }

  /* Balanced safe area padding for mobile */
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }

  .pt-safe {
    padding-top: env(safe-area-inset-top, 28px);
  }

  .pt-safe-minimal {
    padding-top: env(safe-area-inset-top, 20px);
  }

  /* Responsive safe area classes */
  @media (max-width: 480px) {
    .pt-safe {
      padding-top: env(safe-area-inset-top, 24px);
    }

    .pt-safe-minimal {
      padding-top: env(safe-area-inset-top, 18px);
    }

    .pb-safe {
      padding-bottom: env(safe-area-inset-bottom, 12px);
    }
  }

  /* Safe area utilities for different scenarios */
  .safe-area-top {
    height: max(44px, env(safe-area-inset-top));
  }

  .safe-area-bottom {
    height: max(20px, env(safe-area-inset-bottom));
  }
}

@layer utilities {
  /* Add your utilities here */
  .text-2xs {
    font-size: 0.65rem;
    line-height: 1rem;
  }
  
  /* iOS momentum scrolling */
  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* Hide scrollbar but keep functionality */
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Medical-themed scrollbar for date picker and other components */
  .medical-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .medical-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .medical-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(8, 145, 178, 0.3);
    border-radius: 3px;
  }

  .medical-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(8, 145, 178, 0.5);
  }
}
