@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    -webkit-tap-highlight-color: transparent;
    height: -webkit-fill-available;
    overflow-x: hidden;
  }
  
  body {
    min-height: -webkit-fill-available;
    overscroll-behavior-y: none;
    touch-action: pan-y;
    @apply text-foreground;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply text-foreground;
  }

  /* Mobile optimizations */
  @media (max-width: 768px) {
    :root {
      /* Slightly smaller text sizes for mobile */
      font-size: 15px;
    }
    
    /* Better tap target sizes */
    button, 
    [role="button"],
    a.btn,
    input[type="submit"],
    input[type="button"] {
      min-height: 44px;
      min-width: 44px;
    }
    
    /* Fix for iOS 100vh issue */
    .min-h-screen {
      min-height: 100vh;
      min-height: -webkit-fill-available;
    }
    
    /* Improved form controls for mobile */
    input, select, textarea {
      font-size: 16px !important; /* Prevents zoom on focus in iOS */
    }
    
    /* Smoother animations */
    .slide-up {
      animation: slideUp 0.4s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }
    
    /* Delayed animations */
    .delay-100 {
      animation-delay: 100ms;
    }
    
    .delay-200 {
      animation-delay: 200ms;
    }
    
    .delay-300 {
      animation-delay: 300ms;
    }
    
    @keyframes slideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Card hover effect for touch */
    .touch-hover {
      @apply transition-all duration-200;
    }
    
    .active\:scale-98:active {
      transform: scale(0.98);
    }
  }
}

@layer components {
  /* Medical Button System */
  .btn-medical-primary {
    @apply bg-medical-500 hover:bg-medical-600 active:bg-medical-700 text-white font-medium rounded-medical shadow-button-medical transition-all duration-200 min-h-[44px] px-6 py-3 flex items-center justify-center gap-2;
  }

  .btn-medical-secondary {
    @apply bg-white border-2 border-medical-500 text-medical-600 hover:bg-medical-50 active:bg-medical-100 font-medium rounded-medical transition-all duration-200 min-h-[44px] px-6 py-3 flex items-center justify-center gap-2;
  }

  /* Enhanced Medical Prose Styling */
  .prose-medical {
    @apply text-base leading-relaxed;
  }

  .prose-medical h1,
  .prose-medical h2,
  .prose-medical h3,
  .prose-medical h4,
  .prose-medical h5,
  .prose-medical h6 {
    @apply text-medical-800 font-bold mb-4 leading-tight;
  }

  .prose-medical p {
    @apply text-neutral-700 leading-relaxed mb-4;
  }

  .prose-medical a {
    @apply text-medical-600 font-medium no-underline hover:text-medical-700 transition-colors;
  }

  .prose-medical img {
    @apply rounded-medical shadow-subtle;
  }

  .prose-medical ul,
  .prose-medical ol {
    @apply text-neutral-700;
  }

  .prose-medical li {
    @apply mb-2;
  }

  .prose-medical strong {
    @apply text-medical-800 font-semibold;
  }

  /* Mobile-optimized animations */
  .animate-reverse {
    animation-direction: reverse;
  }

  .scale-98 {
    transform: scale(0.98);
  }

  .scale-102 {
    transform: scale(1.02);
  }

  .btn-medical-success {
    @apply bg-success-500 hover:bg-success-600 active:bg-success-700 text-white font-medium rounded-medical shadow-button-medical transition-all duration-200 min-h-[44px] px-6 py-3 flex items-center justify-center gap-2;
  }

  .btn-medical-danger {
    @apply bg-danger-500 hover:bg-danger-600 active:bg-danger-700 text-white font-medium rounded-medical shadow-emergency transition-all duration-200 min-h-[44px] px-6 py-3 flex items-center justify-center gap-2;
  }

  .btn-medical-ghost {
    @apply bg-transparent text-medical-600 hover:bg-medical-50 active:bg-medical-100 font-medium rounded-medical transition-all duration-200 min-h-[44px] px-6 py-3 flex items-center justify-center gap-2;
  }

  /* Medical Card System */
  .card-medical {
    @apply bg-white rounded-medical-lg shadow-card-medical border border-neutral-100 p-card-padding transition-all duration-200;
  }

  .card-medical-hover {
    @apply card-medical hover:shadow-card-hover hover:border-medical-200 cursor-pointer;
  }

  .card-doctor {
    @apply card-medical-hover flex flex-col items-center text-center space-y-3;
  }

  .card-appointment {
    @apply card-medical border-l-4 border-l-medical-500;
  }

  .card-emergency {
    @apply card-medical border-l-4 border-l-danger-500 shadow-emergency;
  }

  /* Medical Form System */
  .input-medical {
    @apply w-full px-4 py-3 border border-neutral-300 rounded-medical text-medical-body bg-white placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-medical-500 focus:border-medical-500 transition-all duration-200 min-h-[44px];
  }

  .input-medical-error {
    @apply input-medical border-danger-500 focus:ring-danger-500 focus:border-danger-500;
  }

  .label-medical {
    @apply block text-medical-label font-medium text-neutral-700 mb-2;
  }

  .form-group-medical {
    @apply space-y-2 mb-form-gap;
  }

  /* Medical Navigation */
  .nav-medical-bottom {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 flex justify-around items-center py-2 px-2 z-50 shadow-footer pb-safe;
    height: calc(60px + env(safe-area-inset-bottom, 0px));
  }

  .nav-medical-item {
    @apply flex flex-col items-center justify-center p-2 min-w-[44px] min-h-[44px] rounded-lg transition-all duration-200;
  }

  .nav-medical-item-active {
    @apply nav-medical-item bg-medical-50 text-medical-600;
  }

  .nav-medical-item-inactive {
    @apply nav-medical-item text-neutral-500 hover:text-medical-500 hover:bg-medical-50;
  }

  /* Medical Status Indicators */
  .status-available {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-success-50 text-success-700;
  }

  .status-busy {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-warning-50 text-warning-700;
  }

  .status-unavailable {
    @apply inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-danger-50 text-danger-700;
  }

  /* Medical Loading States */
  .skeleton-medical {
    @apply bg-gradient-to-r from-neutral-200 via-neutral-100 to-neutral-200 animate-skeleton rounded-medical;
    background-size: 400px 100%;
  }

  .loading-dots-medical {
    @apply inline-flex space-x-1;
  }

  .loading-dots-medical > div {
    @apply w-2 h-2 bg-medical-500 rounded-full animate-loading-dots;
  }

  .loading-dots-medical > div:nth-child(2) {
    animation-delay: 0.1s;
  }

  .loading-dots-medical > div:nth-child(3) {
    animation-delay: 0.2s;
  }

  /* Legacy components (maintain compatibility) */
  .btn-primary {
    @apply btn-medical-primary;
  }

  .mobile-nav-bar {
    @apply nav-medical-bottom;
  }

  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 20px);
  }
}

@layer utilities {
  /* Add your utilities here */
  .text-2xs {
    font-size: 0.65rem;
    line-height: 1rem;
  }
  
  /* iOS momentum scrolling */
  .momentum-scroll {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  /* Hide scrollbar but keep functionality */
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}
