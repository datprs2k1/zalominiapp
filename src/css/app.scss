@import '../styles/mobile.css';
@import '../styles/transitions.css';
@import '../styles/unified-colors.css';

/* Optimized skeleton animations for smooth performance */
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes skeleton-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Hardware acceleration for smooth animations */
.skeleton-optimized {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Smooth skeleton shimmer effect */
.skeleton-shimmer {
  position: relative;
  overflow: hidden;
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/*
 * Color definitions are now managed by the unified color system
 * Import unified-colors.css for all color variables
 * This ensures single source of truth for all colors
 */

:root {
  /* Typography - Medical-optimized font families */
  --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  --font-family-medical: 'SF Pro Display', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  --font-family-mono: 'SF Mono', 'JetBrains Mono', Monaco, 'Cascadia Code', 'Roboto Mono', monospace;
  --font-family-display: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;



  /* Enhanced Highlights and Shadows */
  --highlight: rgba(0, 102, 204, 0.08); /* Primary highlight */
  --highlight-secondary: rgba(0, 168, 107, 0.08); /* Secondary highlight */
  --highlight-hover: rgba(0, 102, 204, 0.12); /* Hover highlight */
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12);
  --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
  --shadow-medical: 0 2px 8px rgba(0, 102, 204, 0.15);
  --shadow-medical-hover: 0 8px 24px rgba(0, 102, 204, 0.2);

  /* Enhanced Medical Animation Timing */
  --medical-transition-fast: 0.15s; /* Fast transitions for immediate feedback */
  --medical-transition-normal: 0.3s; /* Normal transitions for UI elements */
  --medical-transition-gentle: 0.4s; /* Gentle transitions for medical contexts */
  --medical-transition-slow: 0.5s; /* Slow transitions for complex animations */
  --medical-ease: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Medical-appropriate easing */
  --medical-ease-bounce: cubic-bezier(0.34, 1.26, 0.64, 1); /* Gentle bounce for medical context */
  --medical-ease-in-out: cubic-bezier(0.4, 0, 0.2, 1); /* Smooth in-out for medical animations */
  --medical-ease-out: cubic-bezier(0, 0, 0.2, 1); /* Smooth out for exit animations */
  --medical-ease-in: cubic-bezier(0.4, 0, 1, 1); /* Smooth in for enter animations */

  /* Medical Touch Targets */
  --touch-target-min: 44px; /* Minimum touch target size for accessibility */
  --touch-target-comfortable: 48px; /* Comfortable touch target size */
  --touch-target-large: 56px; /* Large touch target for critical actions */

  /* Medical Spacing Scale */
  --spacing-medical-xs: 4px; /* Extra small spacing */
  --spacing-medical-sm: 8px; /* Small spacing */
  --spacing-medical-md: 16px; /* Medium spacing */
  --spacing-medical-lg: 24px; /* Large spacing */
  --spacing-medical-xl: 32px; /* Extra large spacing */
  --spacing-medical-2xl: 48px; /* 2X large spacing */

  /* Medical Border Radius */
  --radius-medical-sm: 6px; /* Small radius for subtle rounding */
  --radius-medical-md: 12px; /* Medium radius for cards */
  --radius-medical-lg: 16px; /* Large radius for prominent elements */
  --radius-medical-xl: 24px; /* Extra large radius for hero elements */

  /* ZaUI Integration - Hospital Theme */
  --zaui-light-body-background-color: var(--background);
  --zaui-light-input-border-color: var(--border);
  --zaui-light-input-hover-border-color: var(--primary-500);
  --zaui-light-option-selected-color: var(--primary-500);
  --zaui-light-radio-checked-background: var(--primary-500);

  /* Safe Areas - Enhanced for better mobile compatibility */
  --safe-top: var(--zaui-safe-area-inset-top, env(safe-area-inset-top, 44px));
  --safe-bottom: max(8px, var(--zaui-safe-area-inset-bottom, env(safe-area-inset-bottom, 30px)));

  /* Medical-specific spacing and sizing - Enhanced */
  --touch-target: 44px; /* Minimum touch target for accessibility */
  --touch-target-lg: 56px; /* Large touch target for primary actions */
  --spacing-xs: 4px; /* Extra small spacing */
  --spacing-sm: 8px; /* Small spacing */
  --spacing-md: 16px; /* Medium spacing - base unit */
  --spacing-lg: 24px; /* Large spacing */
  --spacing-xl: 32px; /* Extra large spacing */
  --spacing-2xl: 48px; /* 2x large spacing */
  --spacing-3xl: 64px; /* 3x large spacing */

  /* Border radius system */
  --border-radius-xs: 4px; /* Extra small border radius */
  --border-radius-sm: 8px; /* Small border radius */
  --border-radius-md: 12px; /* Medium border radius */
  --border-radius-lg: 16px; /* Large border radius */
  --border-radius-xl: 20px; /* Extra large border radius */
  --border-radius-2xl: 24px; /* 2x large border radius */
  --border-radius-full: 9999px; /* Full border radius */

  /* Animation timing for medical workflows - Enhanced */
  --transition-fast: 150ms; /* Fast transitions for immediate feedback */
  --transition-normal: 300ms; /* Normal transitions - medical standard */
  --transition-slow: 500ms; /* Slower transitions for important changes */
  --transition-gentle: 400ms; /* Gentle transitions for medical UI */
  --ease-medical: cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Smooth medical easing */
  --ease-medical-in: cubic-bezier(0.32, 0, 0.67, 0); /* Medical ease in */
  --ease-medical-out: cubic-bezier(0.33, 1, 0.68, 1); /* Medical ease out */
  --ease-medical-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55); /* Gentle bounce */

  /* Medical component specific variables */
  --card-padding-sm: var(--spacing-md); /* Small card padding */
  --card-padding-md: var(--spacing-lg); /* Medium card padding */
  --card-padding-lg: var(--spacing-xl); /* Large card padding */
  --input-height-sm: 40px; /* Small input height */
  --input-height-md: 48px; /* Medium input height */
  --input-height-lg: 56px; /* Large input height */
  --button-height-sm: 36px; /* Small button height */
  --button-height-md: 44px; /* Medium button height */
  --button-height-lg: 52px; /* Large button height */

  /* Medical status indicator sizes */
  --status-indicator-sm: 8px; /* Small status indicator */
  --status-indicator-md: 12px; /* Medium status indicator */
  --status-indicator-lg: 16px; /* Large status indicator */

  /* Medical icon sizes */
  --icon-xs: 12px; /* Extra small icon */
  --icon-sm: 16px; /* Small icon */
  --icon-md: 20px; /* Medium icon */
  --icon-lg: 24px; /* Large icon */
  --icon-xl: 32px; /* Extra large icon */
  --icon-2xl: 48px; /* 2x large icon */
}

:not(input):not(textarea) {
  -webkit-user-select: none;
  user-select: none;
}

.zaui-select {
  &.zaui-input-affix-wrapper,
  .zaui-input-affix-wrapper {
    border-radius: 100px;
  }
}

.zaui-input-textarea-affix-wrapper {
  &.zaui-input-affix-wrapper {
    border: none;
  }

  .zaui-input-show-count-suffix {
    border-radius: 10px;
    background: #f3f3f3;
    padding: 2px 6px;
    font-size: 10px;
    color: #656565;
  }

  .zaui-input-textarea ~ .zaui-input-suffix .zaui-input-show-count-suffix {
    bottom: 0;
    right: 0;
  }
}

.zaui-sheet-content {
  max-height: calc(100vh - 200px);
}

/* Animation for quick access menu */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out forwards;
}

/* Slide up animation */
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out forwards;
}

/* Slide down animation */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out forwards;
}

/* Slide left animation */
@keyframes slideLeft {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-left {
  animation: slideLeft 0.3s ease-out forwards;
}

/* Slide right animation */
@keyframes slideRight {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-right {
  animation: slideRight 0.3s ease-out forwards;
}

.footer-border {
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.footer-nav-item {
  position: relative;
  overflow: hidden;
}

.footer-nav-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: var(--primary);
  border-radius: 12px;
  opacity: 0;
  transform: scale(0.5);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  z-index: -1;
}

.footer-nav-item:active::before {
  opacity: 0.08;
  transform: scale(1);
}

.footer-wave {
  filter: drop-shadow(0px -2px 3px rgba(0, 0, 0, 0.03));
}

.shadow-footer {
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
}

// Circular nav animations
@keyframes nav-pulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.08);
  }
  100% {
    transform: scale(1);
  }
}

.active-nav-item {
  animation: nav-pulse 0.6s ease-in-out;
}

/* Enhanced Medical UI Animations & Accessibility */

// Medical loading animations
@keyframes medical-loading {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

// Accessibility enhancements
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .medical-loading,
  .medical-pulse,
  .medical-heartbeat,
  .emergency-pulse {
    animation: none !important;
  }
}

@keyframes medical-skeleton {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

@keyframes medical-pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
}

@keyframes medical-heartbeat {
  0%,
  100% {
    transform: scale(1);
  }
  14% {
    transform: scale(1.1);
  }
  28% {
    transform: scale(1);
  }
  42% {
    transform: scale(1.1);
  }
  70% {
    transform: scale(1);
  }
}

@keyframes medical-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes medical-slide-in-right {
  from {
    opacity: 0;
    transform: translateX(20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes medical-scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// Medical animation classes
.medical-loading {
  animation: medical-loading 1s linear infinite;
}

.medical-pulse {
  animation: medical-pulse 2s ease-in-out infinite;
}

.medical-heartbeat {
  animation: medical-heartbeat 1.5s ease-in-out infinite;
}

.medical-fade-in {
  animation: medical-fade-in var(--medical-transition-gentle) var(--medical-ease-out) forwards;
}

.medical-slide-in-right {
  animation: medical-slide-in-right var(--medical-transition-normal) var(--medical-ease-out) forwards;
}

.medical-scale-in {
  animation: medical-scale-in var(--medical-transition-fast) var(--medical-ease-out) forwards;
}

// Medical hover effects
.medical-card-hover {
  transition: all var(--medical-transition-normal) var(--medical-ease);

  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-medical-hover);
  }

  &:active {
    transform: translateY(0);
    transition-duration: var(--medical-transition-fast);
  }
}

// Enhanced medical focus styles with accessibility
.medical-focus {
  &:focus {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
    border-radius: var(--radius-medical-sm);
    box-shadow: 0 0 0 1px var(--primary-light);
  }

  &:focus:not(:focus-visible) {
    outline: none;
    box-shadow: none;
  }

  &:focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
    box-shadow: 0 0 0 1px var(--primary-light);
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  .medical-focus:focus,
  .medical-focus:focus-visible {
    outline: 4px solid var(--primary-dark);
    outline-offset: 3px;
    box-shadow: 0 0 0 2px var(--primary);
  }

  .medical-card,
  .btn-medical,
  .btn-emergency {
    border: 2px solid var(--primary-dark);
  }

  .emergency-pulse::before {
    opacity: 0.8;
  }
}

// Screen reader only content
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Skip to content link
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--primary);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;

  &:focus {
    top: 6px;
  }
}

// Vietnamese text support - Medical-optimized
html[lang='vi'] {
  font-family: var(--font-family-primary);

  // Better line height for Vietnamese medical text
  line-height: 1.6;

  // Improved letter spacing for Vietnamese characters
  letter-spacing: 0.01em;

  // Enhanced text rendering for medical content
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

// Medical terminology in Vietnamese
.medical-term-vi {
  font-weight: 500;
  color: var(--primary-dark);
}

// Emergency text in Vietnamese
.emergency-text-vi {
  font-weight: 600;
  color: var(--emergency);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

// Medical status text
.medical-status-vi {
  font-size: 0.875rem;
  font-weight: 500;

  &.available {
    color: var(--secondary-dark);
  }

  &.busy {
    color: var(--warning);
  }

  &.emergency {
    color: var(--emergency);
    animation: medical-pulse 1s ease-in-out infinite;
  }
}

// Emergency pulse animation
.emergency-pulse {
  animation: medical-pulse 1s ease-in-out infinite;

  &::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: var(--emergency);
    border-radius: inherit;
    opacity: 0.3;
    animation: medical-pulse 1s ease-in-out infinite;
    z-index: -1;
  }
}

.medical-skeleton {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200px 100%;
  animation: medical-skeleton 1.5s infinite;
}

// Gentle hover effects for medical cards
.medical-card {
  transition: all var(--transition-normal) var(--ease-medical);

  &:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-card-hover);
  }

  &:active {
    transform: translateY(0);
    transition-duration: var(--transition-fast);
  }
}

// Focus states for accessibility
.medical-focus {
  &:focus {
    outline: none;
    box-shadow: var(--shadow-input-focus);
    border-color: var(--primary);
  }

  &:focus-visible {
    animation: focus-ring var(--transition-normal) var(--ease-medical);
  }
}

// Status indicator animations
@keyframes status-pulse {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.7;
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

// Shimmer effect for loading images
@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}

// Enhanced medical card hover effects
.medical-card-enhanced {
  transition: all var(--transition-normal) var(--ease-medical);

  &:hover {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 20px 40px rgba(0, 102, 204, 0.15);
  }

  &:active {
    transform: translateY(-2px) scale(1.01);
    transition-duration: var(--transition-fast);
  }
}

// Glass morphism effect
.glass-morphism {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

// Floating animation for decorative elements
@keyframes float {
  0%,
  100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-10px) rotate(5deg);
  }
}

.animate-float {
  animation: float 4s ease-in-out infinite;
}

.status-indicator {
  &.emergency {
    animation: status-pulse 1s ease-in-out infinite;
    background-color: var(--emergency);
  }

  &.urgent {
    animation: status-pulse 2s ease-in-out infinite;
    background-color: var(--urgent);
  }

  &.routine {
    background-color: var(--routine);
  }
}

// Notification animations
@keyframes notification-enter {
  0% {
    transform: translateX(100%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes notification-exit {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  100% {
    transform: translateX(100%);
    opacity: 0;
  }
}

.notification-enter {
  animation: notification-enter 0.4s var(--ease-medical);
}

.notification-exit {
  animation: notification-exit 0.3s var(--ease-medical);
}

// Medical form animations
.form-field-enter {
  animation: fadeInUp 0.3s var(--ease-medical);
}

.form-error-shake {
  animation: shake 0.5s var(--ease-medical);
}

@keyframes shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-2px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(2px);
  }
}

// Progress indicators for medical processes
@keyframes progress-fill {
  0% {
    width: 0%;
  }
  100% {
    width: var(--progress-width, 100%);
  }
}

.medical-progress {
  .progress-bar {
    animation: progress-fill 1s var(--ease-medical);
    background: linear-gradient(90deg, var(--primary), var(--primary-light));
  }
}

// Accessibility improvements
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// High contrast mode support
@media (prefers-contrast: high) {
  :root {
    --border: #000000;
    --text-muted: #000000;
    --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
  }
}

// Manual high contrast mode
.high-contrast {
  --primary: #0000ff;
  --secondary: #008000;
  --background: #ffffff;
  --surface: #ffffff;
  --text-primary: #000000;
  --text-secondary: #000000;
  --text-muted: #000000;
  --border: #000000;
  --border-light: #000000;
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.5);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.3);

  // Ensure sufficient contrast for all interactive elements
  button,
  a,
  input,
  select,
  textarea {
    border: 2px solid #000000 !important;
  }

  // High contrast focus indicators
  .medical-focus:focus {
    outline: 3px solid #ff0000 !important;
    outline-offset: 2px !important;
  }
}

// Font size controls
[data-font-size='small'] {
  font-size: 14px;

  .text-xs {
    font-size: 10px;
  }
  .text-sm {
    font-size: 12px;
  }
  .text-base {
    font-size: 14px;
  }
  .text-lg {
    font-size: 16px;
  }
  .text-xl {
    font-size: 18px;
  }
  .text-2xl {
    font-size: 20px;
  }
}

[data-font-size='large'] {
  font-size: 18px;

  .text-xs {
    font-size: 14px;
  }
  .text-sm {
    font-size: 16px;
  }
  .text-base {
    font-size: 18px;
  }
  .text-lg {
    font-size: 20px;
  }
  .text-xl {
    font-size: 24px;
  }
  .text-2xl {
    font-size: 28px;
  }
}

// Screen reader only content
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.sr-only.focus:not(.sr-only) {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

// Enhanced focus indicators for medical UI
.medical-focus:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.3);
  border-color: var(--primary);
}

.medical-focus:focus-visible {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}

// Skip to content link
.skip-to-content {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--primary);
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 1000;
  transition: top 0.3s;
}

.skip-to-content:focus {
  top: 6px;
}

// Focus trap styling
.focus-trap {
  isolation: isolate;
}

// Keyboard navigation indicators
[data-keyboard-navigation='true'] {
  .medical-focus:focus {
    box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.5);
  }
}

// Touch target improvements for accessibility
@media (pointer: coarse) {
  button,
  a,
  input,
  select,
  textarea {
    min-height: 44px;
    min-width: 44px;
  }

  .touch-target {
    min-height: 44px;
    min-width: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}
